<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>COO SOCIAL</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="./img/favicon.png">
  <link rel="stylesheet" href="css/styles.css?v=1">
  <script src="js/web3.min.js"></script>
  <script src="js/bignumber.js"></script>
  <script src="js/jquery-3.6.0.min.js"></script>
  <script src="js/hello.all.min.js"></script>
</head>
<body>
<div class="home">
  <section class="head_car" id="home">
    <div class="head_position" id="tab_menu">
      <div class="head_tab wrapper" >
        <div class="tab_left">
          <img id="tab_logo" src="./img/logo_white.png" alt=""/>
        </div>
        <div class="tab_right">
          <div class="tab_div">
            <div class="tab_menu ">
              <a href="index.html" style="color:rgba(255,255,255,0.5)">
                <p>home</p>
                <div></div>
              </a>
            </div>
            <div class="tab_menu tab_menu_white">
              <a href="#airdrop">
                <p>Airdrop</p>
                <div></div>
              </a>
            </div>
            <div class="tab_menu tab_menu_white">
              <a href="#token">
                <p>Token</p>
                <div></div>
              </a>
            </div>
            <div class="tab_menu tab_menu_white">
              <a href="#contact">
                <p>contact</p>
                <div></div>
              </a>
            </div>
          </div>
        </div>
        <div style="flex:1"></div>
      </div>
    </div>
    <div class="home_car wrapper">
      <h1>New Year Airdrop</h1>
    </div>
  </section>

  <section class="claim_car" id="airdrop">
    <div class="wrapper">
      <div class="heading_div">
        <h2>Airdrop</h2>
        <div></div>
      </div>
      <div class="subtitle_div">
        <p>$COO pays tribute to traditional social Twitter users with a large-scale airdrop of tokens. Use your Twitter account to claim the airdrop. The initial airdrop factor is 1, and it decreases to 0 over time. The current airdrop factor is <span style="color:#5489FF" id="rate">1</span>.
          <br/>Formula: airdrop=count*each*factor</p>
      </div>
      <div class="claim_div">
        <div class="row_column" style="border-bottom: 1px solid rgba(151,151,151,0.2)">
          <div class="step_item">
            <div class="step_title">
              <div></div>
              <p>STEP 1</p>
            </div>
            <p class="step_text">CONNECT YOUR WALLET</p>
            <p id="account"></p>
            <div class="btn_div enable_btn" id="walletbtn" onclick="connectWallet()" style="cursor: pointer;">CONNECT</div>
          </div>
          <div class="step_item">
            <div class="step_title">
              <div></div>
              <p>STEP 2</p>
            </div>
            <p class="step_text">CONNECT YOUR TWITTER</p>
            <div class="btn_div enable_btn" id="twitterbtn" onclick="connectTwitter()"  style="cursor: pointer;">CONNECT</div>
          </div>
        </div>

        <div style="padding-top: 34px">
          <div class="step_title">
            <div></div>
            <p>STEP 3</p>
          </div>
          <p class="step_text">ESTIMATE YOUR REWARD <a href="javascript:refreshData()" style="color:#5489FF">Refresh</a> <span id="error" style="color:red;font-weight:400;display:none;">Account registration is less than 180 days, unable to claim</span></p>
          <div class="openSea_div">

            <div class="row_column">
              <div class="openSea_item" >
                <div>
                  <span style="color:#666;font-size:16px">Type</span>
                </div>
                <div>
                  <span style="color:#666;font-size:16px">Count</span>
                </div>
                <div>
                  <span style="color:#666;font-size:16px">MaxCount</span>
                </div>
                <div>
                  <span style="color:#666;font-size:16px">Each</span>
                </div>
                <div>
                  <span style="color:#666;font-size:16px">Airdrop</span>
                </div>
              </div>                         
            </div>
            <div class="row_column">
              <div class="openSea_item">
                <div>
                  <span>Followers</span>
                </div>
                <div>
                  <p id="followers_count">-</p>
                </div>
                <div>
                  <p>50000</p>
                </div>
                <div>
                  <p>67.5</p>
                </div>
                <div>
                  <p id="followers_count_r">-</p>
                </div>
              </div>    
            </div>
            <div class="row_column">
              <div class="openSea_item">
                <div>
                  <span>Tweet</span>
                </div>
                <div>
                  <p id="tweet_count">-</p>
                </div>
                <div>
                  <p>200</p>
                </div>
                <div>
                  <p>7500</p>
                </div>
                <div>
                  <p id="tweet_count_r">-</p>
                </div>
              </div>
            </div>



           
            <div class="row_column">
              <div class="openSea_item">
                <div>
                  <span>Following</span>
                </div>
                <div>
                  <p id="following_count">-</p>
                </div>
                <div>
                  <p>1000</p>
                </div>
                <div>
                  <p>150</p>
                </div>
                <div>
                  <p id="following_count_r">-</p>
                </div>
              </div>
            </div>
            <div class="row_column">
              
              <div class="openSea_item">
                <div>
                  <span>Retweet COO</span>
                </div>
                <div>
                  <p id="isRetween">-</p>
                </div>
                <div>
                  <p>1</p>
                </div>
                <div>
                  <p>37500</p>
                </div>
                <div>
                  <p id="isRetween_r">-</p>
                </div>
              </div>
            </div>
            <div class="row_column">
              <div class="openSea_item">
                <div>
                  <span>Follow COO</span>
                </div>
                <div>
                  <p id="isFollow">-</p>
                </div>
                <div>
                  <p>1</p>
                </div>
                <div>
                  <p>37500</p>
                </div>
                <div>
                  <p id="isFollow_r">-</p>
                </div>
              </div>  
            </div>
            
          </div>
          <div class="openSea_reward">
            <div>
              <span>Total Airdrop $COO</span>
            </div>
            <div>
              <span id="total_amount"></span>
              <div class="btn_div deposit_btn" style="margin-left:10px" onclick="claim()">Claim</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="what_car" id="token">
    <div class="wrapper">
      <div class="what_div row_column">
        <div class="what_left_div">
          <h2>TOKEN DISTRIBUTION</h2>
          <p>The original intention of $COO was to establish a WEB3.0 social platform. An economy owned and managed by its participants.</p>
          <p>The overall distribution of the spirit, structure and token economics of $COO as a whole is introduced as follows:</p>
        </div>
        <div class="what_right_div">
          <img src="./img/what_right_icon.png" alt=""/>
        </div>
      </div>
      <div class="pie_chart_div row_column">
        <div>
          <div class="pie_chart_item pie_chart_left">
            <h2>10%</h2>
            <p>Team</p>
            <span>10% of $COO token will be distributed to the team. 20% TGE . 80% 2 years distribution </span>
          </div>
          <div class="pie_chart_item pie_chart_left">
            <h2>30%</h2>
            <p>Airdrop</p>
            <span>30% of $COO token will be distributed to the twitter user</span>
          </div>
        </div>
        <div class="pie_chart_img">
          <img src="./img/123.png" alt="" style="width: 100%;"/>
        </div>
        <div>
          <div class="pie_chart_item pie_chart_right">
            <h2>50%</h2>
            <p>DAO</p>
            <span>50% of $COO token will be distributed to the dao. incentives, governance, liquidity, mining</span>
          </div>
          <div class="pie_chart_item pie_chart_right">
            <h2>10%</h2>
            <p>Organization</p>
            <span>10% of $COO token will be distributed to the Organization</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="partner_car">
    <div class="wrapper">
      <div class="heading_div">
        <h2>Partner</h2>
        <div></div>
      </div>
      <div class="partner_div row_column">
        <div style="display: flex; flex-direction: row">
          <div class="partner_item">
            <img src="./img/1.png" alt=""/>
          </div>
          <div class="partner_item">
            <img src="./img/2.png" alt=""/>
          </div>
        </div>

        <div style="display: flex; flex-direction: row">
          <div class="partner_item">
            <img src="./img/3.png" alt=""/>
          </div>
          <div class="partner_item">
            <img src="./img/4.png" alt=""/>
          </div>
        </div>
      </div>

      <div class="partner_div row_column">
        <div style="display: flex; flex-direction: row">
          <div class="partner_item">
            <img src="./img/5.png" alt=""/>
          </div>
          <div class="partner_item">
            <img src="./img/6.png" alt=""/>
          </div>
        </div>

        <div style="display: flex; flex-direction: row">
          <div class="partner_item">
            <img src="./img/7.png" alt=""/>
          </div>
          <div class="partner_item">
            <img src="./img/8.png" alt=""/>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="link_car" id="contact">
    <div class="wrapper">
      <div class="heading_div">
        <h2>contact</h2>
        <div></div>
      </div>
      <div class="link_div row_column">
        <div class="link_item">
          <a href="javascript:alert('Coming soon')">
            <img src="./img/coo_icon.png" alt=""/>
            <p>Coo</p>
          </a>
        </div>
        <div class="link_item">
          <a href="https://discord.gg/98brWk4dVj" target="_blank">
            <img src="./img/telegram_icon.png" alt=""/>
            <p>Discord</p>
          </a>
        </div>
        <div class="link_item">
          <a href="https://twitter.com/coo_so_fi" target="_blank">
            <img src="./img/twitter_icon.png" alt=""/>
            <p>Twitter</p>
          </a>
        </div>
      </div>
    </div>
  </section>
  <div class="footer_car">
    <p>Copyright Â© 2022 COO. All rights reserved</p>
  </div>
</div>
</body>
<script type="text/javascript">
  var web3js;
  var account;
  var twitter_follow_url = "https://twitter.com/coo_so_fi";
  var twitter_retween_url = "https://twitter.com/coo_so_fi";
  var contract_abi=[ { "inputs": [ { "internalType": "string", "name": "_name", "type": "string" }, { "internalType": "string", "name": "_symbol", "type": "string" }, { "internalType": "address", "name": "_signer", "type": "address" } ], "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "address", "name": "owner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "spender", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" } ], "name": "Approval", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": true, "internalType": "address", "name": "from", "type": "address" }, { "indexed": true, "internalType": "address", "name": "to", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" } ], "name": "Transfer", "type": "event" }, { "inputs": [], "name": "AMOUNT_AIREDROP", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "AMOUNT_DAO", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "AMOUNT_ORGAN", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "AMOUNT_TEAM", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "MAX_SUPPLY", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "MINT_CALL_HASH_TYPE", "outputs": [ { "internalType": "bytes32", "name": "", "type": "bytes32" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "", "type": "address" } ], "name": "_addrminted", "outputs": [ { "internalType": "uint8", "name": "", "type": "uint8" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_claimed", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "name": "_minted", "outputs": [ { "internalType": "uint8", "name": "", "type": "uint8" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "name": "_sysminted", "outputs": [ { "internalType": "uint8", "name": "", "type": "uint8" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "owner", "type": "address" }, { "internalType": "address", "name": "spender", "type": "address" } ], "name": "allowance", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" } ], "name": "approve", "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "account", "type": "address" } ], "name": "balanceOf", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "cSigner", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "uint256", "name": "account", "type": "uint256" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }, { "internalType": "bytes32", "name": "r", "type": "bytes32" }, { "internalType": "bytes32", "name": "s", "type": "bytes32" }, { "internalType": "uint8", "name": "v", "type": "uint8" } ], "name": "claim", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "decimals", "outputs": [ { "internalType": "uint8", "name": "", "type": "uint8" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "subtractedValue", "type": "uint256" } ], "name": "decreaseAllowance", "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "endTime", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "addedValue", "type": "uint256" } ], "name": "increaseAllowance", "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "daoAddress", "type": "address" } ], "name": "mintDAO", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "organAddress", "type": "address" } ], "name": "mintOrgan", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "teamAddress", "type": "address" } ], "name": "mintTeam", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "name", "outputs": [ { "internalType": "string", "name": "", "type": "string" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "owner", "outputs": [ { "internalType": "address", "name": "", "type": "address" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "symbol", "outputs": [ { "internalType": "string", "name": "", "type": "string" } ], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "totalSupply", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ], "stateMutability": "view", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "recipient", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" } ], "name": "transfer", "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [ { "internalType": "address", "name": "sender", "type": "address" }, { "internalType": "address", "name": "recipient", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" } ], "name": "transferFrom", "outputs": [ { "internalType": "bool", "name": "", "type": "bool" } ], "stateMutability": "nonpayable", "type": "function" } ];
  var contract="0x5628d47c26F2F7cc21443614188aD4aA2CC3B4e5";
  var appkey = "9tmPMiyhIMZZCMBaw5fn1qD7X";
  var user_id;
  window.addEventListener('scroll',function(){
    let head = document.querySelector('.head_position');
    let  alist = document.getElementsByClassName( "tab_menu" );
    if(window.scrollY>0) {
        head.classList.add("head_scroll");
        document.getElementById("tab_logo").src='./img/logo_black.png';
        if (alist){
          for ( var  idx = 0; idx < alist.length; idx ++){
              var  mya = alist[idx];
              mya.classList.remove("tab_menu_white");
              mya.classList.add("tab_menu_black");
          }
        }
    }else{
        head.classList.remove("head_scroll");
        document.getElementById("tab_logo").src='./img/logo_white.png';
        if (alist){
          for ( var  idx = 0; idx < alist.length; idx ++){
              var  mya = alist[idx];
              mya.classList.remove("tab_menu_black");
              mya.classList.add("tab_menu_white");
          }
        }
    }
  });
  window.onload = function(){
    
    hello.init({twitter:appkey},{redirect_uri:'https://api.coo.so/oauth'});

    function receiveMsg(e) {
      console.log("nMessage: " + e.data);
      let data = JSON.parse(e.data);
      twitterLogined(data.code,data.msg,data.data);
    }

    if(window.addEventListener) {
      window.addEventListener('message',receiveMsg,false);
    }else {
      window.attachEvent('message',receiveMsg);
    }
  }

  function twitterLogined(code,msg,data){
    if(code!="0"){
      alert(msg);
      return;
    }
    $("#twitterbtn").html(data.username);
    user_id = data.user_id;
    updateData(data);
  }

  function updateData(data){
    if(data.isFollow>0){
      $("#isFollow").html("Finish");
      $("#isFollow_r").html(data.isFollow);
    }else{
      $("#isFollow").html("<a href='"+twitter_follow_url+"' target='_blank'>To follow</a>");
      $("#isFollow_r").html(data.isFollow);
    }
    if(data.isRetween>0){
      $("#isRetween").html("Finish");
      $("#isRetween_r").html(data.isRetween);
    }else{
      $("#isRetween").html("<a href='"+twitter_retween_url+"' target='_blank'>To retween</a>");
      $("#isRetween_r").html(data.isRetween);
    }
    $("#followers_count").html(data.followers_count);
    $("#followers_count_r").html(data.followers_count_r);
    $("#following_count").html(data.following_count);
    $("#following_count_r").html(data.following_count_r);
    $("#tweet_count").html(data.tweet_count);
    $("#tweet_count_r").html(data.tweet_count_r);
    $("#total_amount").html(data.amount);
    $("#rate").html(BigNumber(data.rate).toFixed(2));

    if(data.reg_allow!=1){
      $("#error").css("display","inline");
    }else{
      $("#error").css("display","none");
    }
  }

   async function connectWallet(){
    if (window.ethereum) {
        window.ethereum.on('accountsChanged',function(accounts){(account!=accounts)?location.reload():''});
        window.ethereum.on('networkChanged',async function(chainId){(chainId!="1")?(await ethereum.request({method:'wallet_switchEthereumChain',params:[{chainId:'0x1'}]})):location.reload()});
        let cid = await new Web3(window.ethereum).eth.net.getId() + "";
        if (cid != "1") {
            await ethereum.request({method:'wallet_switchEthereumChain',params:[{chainId:'0x1'}]});
            return;
        }
        let accounts = await window.ethereum.request({method:'eth_requestAccounts'});
        web3js = new Web3(window.ethereum);
        let ac = accounts[0];
        
        let c = new web3js.eth.Contract(contract_abi,contract);
        minted = await c.methods._addrminted(ac).call();
        if(minted>0){
          alert("Your address has already been collected, please change to another account");
        }else{
          account = ac;
          $("#walletbtn").html(account.substr(0,5)+"..."+account.substr(account.length-5));
        }          
      }
   }
   function connectTwitter(){
      if(!account){
        alert("Please connect to the wallet");
        return;
      }
      hello('twitter').login();
   }

   async function claim(){
    let res = await fetch("https://api.coo.so/claim?user_id="+user_id);
    let result = await res.json();
    if(result.r){
      let amount = BigNumber(result.amount).multipliedBy(1000000000000000000).toFixed(0);
      let c = new web3js.eth.Contract(contract_abi,contract);
      await c.methods.claim(result.user_id,amount,result.r,result.s,result.v).call();
    }else{
      alert("Error");
    }
   }

   async function refreshData(){
     if(user_id){
      let res = await fetch("https://api.coo.so/info?user_id="+user_id);
      let result = await res.json();
      updateData(result);
     }
   }
</script>
</html>
